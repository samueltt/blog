
  <div id="cnblogs_post_body">
   <pre><span style="color: #99cc00; font-size: 14pt;">~~语法~~</span></pre> 
   <p><em><span style="color: #33cccc;">CREATE </span><span style="color: #33cccc;">TRIGGER </span>&lt;<span style="color: #cc99ff;">触发器名称</span>&gt;</em>&nbsp; --触发器必须有名字，最多64个字符，可能后面会附有分隔符.它和MySQL中其他对象的命名方式基本相象.<br /><em>{ <span style="color: #33cccc;">BEFORE </span>| <span style="color: #33cccc;">AFTER </span>}</em>&nbsp; --触发器有执行的时间设置：可以设置为事件发生前或后。<br /><em>{ <span style="color: #33cccc;">INSERT </span>| <span style="color: #33cccc;">UPDATE </span>| <span style="color: #33cccc;">DELETE </span>}</em>&nbsp; --同样也能设定触发的事件：它们可以在执行insert、update或delete的过程中触发。<br /><em><span style="color: #33cccc;">ON </span>&lt;<span style="color: #cc99ff;">表名称</span>&gt;</em>&nbsp; --触发器是属于某一个表的:当在这个表上执行插入、 更新或删除操作的时候就导致触发器的激活. 我们不能给同一张表的同一个事件安排两个触发器。<br /><em><span style="color: #33cccc;">FOR </span><span style="color: #33cccc;">EACH </span></em><span style="color: #33cccc;"><em>ROW</em>&nbsp; </span>--触发器的执行间隔：FOR EACH ROW子句通知触发器 每隔一行执行一次动作，而不是对整个表执行一次。<br /><em>&lt;<span style="color: #cc99ff;">触发器SQL语句</span>&gt;</em>&nbsp; --触发器包含所要触发的SQL语句：这里的语句可以是任何合法的语句， 包括复合语句，但是这里的语句受的限制和函数的一样。<br /><br />--你必须拥有相当大的权限才能创建触发器（CREATE TRIGGER），如果你已经是Root用户，那么就足够了。这跟SQL的标准有所不同。</p> 
   <pre><span style="color: #99cc00; font-size: 14pt;">~~实例~~</span></pre> 
   <h3><span style="font-family: 宋体; color: #339966; font-size: 14pt;">example1:</span></h3> 
   <p>创建表tab1</p> 
   <div class="cnblogs_Highlighter"> 
    <pre class="brush:sql">DROP TABLE IF EXISTS tab1;
CREATE TABLE tab1(
    tab1_id varchar(11)
);
</pre> 
   </div> 
   <p>创建表tab2</p> 
   <div class="cnblogs_Highlighter"> 
    <pre class="brush:sql">DROP TABLE IF EXISTS tab2;
CREATE TABLE tab2(
    tab2_id varchar(11)
);
</pre> 
   </div> 
   <p><br />创建触发器:<span style="color: #ff9900;">t_afterinsert_on_tab1</span></p> 
   <p>作用：增加tab1表记录后自动将记录增加到tab2表中</p> 
   <div class="cnblogs_Highlighter"> 
    <pre class="brush:sql">DROP TRIGGER IF EXISTS t_afterinsert_on_tab1;
CREATE TRIGGER t_afterinsert_on_tab1 
AFTER INSERT ON tab1
FOR EACH ROW
BEGIN
     insert into tab2(tab2_id) values(new.tab1_id);
END;
</pre> 
   </div> 
   <p>测试一下</p> 
   <div class="cnblogs_Highlighter"> 
    <pre class="brush:sql">INSERT INTO tab1(tab1_id) values('0001');
</pre> 
   </div> 
   <p>看看结果</p> 
   <div class="cnblogs_Highlighter"> 
    <pre class="brush:sql">SELECT * FROM tab1;
SELECT * FROM tab2;
</pre> 
   </div> 
   <h4><span style="font-family: 宋体; color: #339966; font-size: 14pt;">example2:</span></h4> 
   <p>创建触发器:<span style="color: #ff9900;">t_afterdelete_on_tab1</span></p> 
   <p>作用：删除tab1表记录后自动将tab2表中对应的记录删去</p> 
   <div class="cnblogs_Highlighter"> 
    <pre class="brush:sql">DROP TRIGGER IF EXISTS t_afterdelete_on_tab1;
CREATE TRIGGER t_afterdelete_on_tab1
AFTER DELETE ON tab1
FOR EACH ROW
BEGIN
      delete from tab2 where tab2_id=old.tab1_id;
END;
</pre> 
   </div> 
   <p>测试一下</p> 
   <div class="cnblogs_Highlighter"> 
    <pre class="brush:sql">DELETE FROM tab1 WHERE tab1_id='0001';
</pre> 
   </div> 
   <p>看看结果</p> 
   <div class="cnblogs_Highlighter"> 
    <pre class="brush:sql">SELECT * FROM tab1;
SELECT * FROM tab2;
</pre> 
   </div>
  </div>
